openapi: 3.0.3
info:
  title: Rabit HR Platform API
  description: |
    Complete HR Management Platform API with comprehensive features for:
    - Employee Management
    - Attendance & Leave Management
    - Payroll & Benefits
    - Performance Reviews
    - Training & Development
    - Recruitment
    - Document Management
    - Consultation Services
  version: 1.0.0
  contact:
    name: Rabit HR Support
    email: support@rabithr.com
    url: https://rabithr.com
  license:
    name: Proprietary
    
servers:
  - url: http://localhost:3000
    description: Development server
  - url: https://api.rabithr.com
    description: Production server

tags:
  - name: Authentication
    description: User authentication and authorization
  - name: Employees
    description: Employee management operations
  - name: Attendance
    description: Attendance tracking and management
  - name: Leave
    description: Leave requests and approvals
  - name: Payroll
    description: Payroll processing and management
  - name: Performance
    description: Performance reviews and evaluations
  - name: Training
    description: Training programs and courses
  - name: Recruitment
    description: Job postings and applications
  - name: Documents
    description: Document management system
  - name: Consultation
    description: HR consultation services
  - name: Reports
    description: Analytics and reporting
  - name: Settings
    description: System settings and configuration

paths:
  /health:
    get:
      summary: Health check endpoint
      description: Check if the API is running and healthy
      tags:
        - System
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  timestamp:
                    type: string
                    format: date-time
                  uptime:
                    type: number
                  version:
                    type: string

  /api/auth/login:
    post:
      summary: User login
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  example: admin@rabithr.com
                password:
                  type: string
                  format: password
                  example: Password123!
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'
        '401':
          description: Invalid credentials
          
  /api/auth/logout:
    post:
      summary: User logout
      tags:
        - Authentication
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Logout successful

  /api/employees:
    get:
      summary: List all employees
      tags:
        - Employees
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
        - in: query
          name: search
          schema:
            type: string
        - in: query
          name: department
          schema:
            type: string
      responses:
        '200':
          description: List of employees
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Employee'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                    
    post:
      summary: Create new employee
      tags:
        - Employees
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmployeeInput'
      responses:
        '201':
          description: Employee created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
        username:
          type: string
        email:
          type: string
          format: email
        role:
          type: string
          enum: [admin, hr, manager, employee, consultant]
        fullName:
          type: string
        avatar:
          type: string
          format: uri
          
    Employee:
      type: object
      properties:
        id:
          type: integer
        employeeId:
          type: string
        fullName:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        department:
          type: string
        position:
          type: string
        hireDate:
          type: string
          format: date
        status:
          type: string
          enum: [active, inactive, on_leave, terminated]
        salary:
          type: number
          format: double
          
    EmployeeInput:
      type: object
      required:
        - fullName
        - email
        - department
        - position
      properties:
        fullName:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        department:
          type: string
        position:
          type: string
        hireDate:
          type: string
          format: date
        salary:
          type: number
          
    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
          
    Error:
      type: object
      properties:
        error:
          type: string
        message:
          type: string
        code:
          type: string
        details:
          type: object
          
security:
  - bearerAuth: []
